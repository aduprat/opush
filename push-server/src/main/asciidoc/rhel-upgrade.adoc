== How to upgrade from Opush 2 to Opush 3 on Red Hat Enterprise Linux and CentOS

=== System requirements

  * Today the latest version is 6.5 (as of February 26, 2014). 
Opush is currently available only with 6.x version.
  * Opush 3 runs on *Java* 7, we advise to use http://openjdk.java.net/projects/jdk7/[*OpenJDK*].
  * Opush 2 and *OBM* components has to be on the latest version 2.5.7 (as of March 19, 2014), the required *OBM* components are:
    ** *obm-PostgreSQL* or *obm-MySQL*
    ** *obm-locator*
    ** *obm-sync*
  * Opush needs <<cassandra-configuration#_how_to_configure_cassandra,*Cassandra to be configured*>> on your network


=== Repository Configuration

In order to add the Opush RPM repository declaration, create the file +/etc/yum.repos.d/opush.repo+ and add the following lines: 
[source]
----
[opush]
name=opush
baseurl=http://packages.obm.org/rpm/opush/stable/$releasever
enabled=1
gpgcheck=0
----


=== Opush Installation

First of all, you have to remove legacy components: 
[source]
----
$ yum remove jetty6
$ yum remove obm-jetty
----

And finally, upgrade Opush
[source]
----
$ yum install opush
----


=== Configuration Example

include::rhel-configuration.adoc[]

=== Restarting Opush
 
[source]
----
$ service opush restart
----
 
 
=== Activating Opush service on boot
 
[source]
----
$ chkconfig opush on
----
